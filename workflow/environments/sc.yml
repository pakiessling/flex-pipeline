# sc.yml â€” Main Python environment for QC, integration, marker genes,
#           CyteType annotation, and report generation.
# Used by: 02_qc.py, 03_integration.py, 05_cytetype.py, 06_markers.py, 07_report.py
# Note: doublet detection runs in 01_soupx_doublets.R via scDblFinder (R); not needed here.
name: flex-sc
channels:
  - nodefaults
  - conda-forge
  - bioconda
dependencies:
  - python=3.11
  - scanpy>=1.11,<1.12      # minor-locked: algorithm changes affect clustering/UMAP
  - anndata>=0.12,<0.13     # minor-locked: format changes can break layer access
  - harmonypy>=0.2,<0.3     # minor-locked: integration algorithm
  - pacmap>=0.8,<1          # minor-locked: dimensionality reduction algorithm
  - leidenalg>=0.11,<1      # minor-locked: clustering algorithm
  - python-igraph>=1.0,<2   # major-locked
  - scipy>=1.16,<2          # major-locked
  - numpy>=2,<3             # major-locked
  - pandas>=2,<3            # major-locked
  - matplotlib>=3.10,<4     # major-locked
  - adjusttext>=1,<2        # UMAP label repulsion
  - statsmodels<1           # major-locked
  - scikit-image<1          # major-locked
  - setuptools
  - pip
  - pip:
    # Fast Wilcoxon rank-sum DE: https://github.com/remydubois/illico
    - illico==0.2.0
    # LLM-based cluster annotation: https://github.com/NygenAnalytics/CyteType
    - cytetype==0.12.0
